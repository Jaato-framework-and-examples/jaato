# .env.example - Copy to .env and fill in values

# =============================================================================
# Provider Selection
# =============================================================================
# Choose which model provider to use. Options:
#   google_genai  - Google AI Studio / Vertex AI (Gemini models)
#   github_models - GitHub Models API (GPT, Claude, Gemini, Llama via GitHub)
#   anthropic     - Anthropic API (Claude models direct)
#   claude_cli    - Claude Code CLI wrapper (uses CLI's auth, no API credits)
#   antigravity   - Google Antigravity IDE backend (Gemini 3, Claude via Google OAuth)
#
# Default: google_genai
JAATO_PROVIDER=google_genai

# =============================================================================
# Model Configuration
# =============================================================================
# Model name depends on provider:
#   google_genai:  gemini-2.5-flash, gemini-2.5-pro, gemini-2.0-flash, etc.
#   github_models: openai/gpt-4o, anthropic/claude-sonnet-4, meta/llama-3.1-70b-instruct, etc.
#   anthropic:     claude-sonnet-4-20250514, claude-3-5-sonnet-20241022, claude-opus-4-5-20251101, etc.
#   claude_cli:    sonnet, opus, haiku (aliases) or full model names
#   antigravity:   antigravity-gemini-3-flash, antigravity-claude-sonnet-4-5, gemini-2.5-flash, etc.
#
MODEL_NAME=gemini-2.5-flash

# =============================================================================
# Google GenAI Authentication (for JAATO_PROVIDER=google_genai)
# =============================================================================
# Choose ONE of the following authentication methods:

# --- Option A: Google AI Studio (personal/development) ---
# Simple API key authentication for quick development and personal use.
# Get your key at: https://aistudio.google.com/apikey
#
# GOOGLE_GENAI_API_KEY=your-api-key-from-ai-studio

# --- Option B: Vertex AI (organization/production) ---
# GCP-based authentication for enterprise use with billing and access controls.
#
# Project and location (required for Vertex AI)
# JAATO_GOOGLE_PROJECT=your-gcp-project-id
# JAATO_GOOGLE_LOCATION=us-central1
#
# Authentication options (choose one):
# 1. Application Default Credentials (recommended for local dev):
#    Run: gcloud auth application-default login
#
# 2. Service account key file (for CI/CD and production):
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json
#
# 3. Service account impersonation (for least-privilege and cross-project access):
# JAATO_GOOGLE_TARGET_SERVICE_ACCOUNT=target-sa@project.iam.gserviceaccount.com
# JAATO_GOOGLE_AUTH_METHOD=impersonation

# --- Google Auth Method Selection (optional) ---
# Explicitly set authentication method. If not set, auto-detected from
# available credentials (api_key > target_service_account > service_account_file > adc).
#
# Options: auto, api_key, service_account_file, adc, impersonation
# JAATO_GOOGLE_AUTH_METHOD=auto
#
# Force Vertex AI (true) or AI Studio (false) endpoint:
# JAATO_GOOGLE_USE_VERTEX=true

# =============================================================================
# GitHub Models Authentication (for JAATO_PROVIDER=github_models)
# =============================================================================
# Access GPT, Claude, Gemini, Llama, and more through GitHub's Models API.
# Free tier available for all GitHub accounts (with token limits).
#
# Create a fine-grained PAT at: https://github.com/settings/tokens?type=beta
# Required permission: Account permissions → Models → Read
#
# GITHUB_TOKEN=github_pat_your-token-here
#
# Optional: Organization for billing attribution
# JAATO_GITHUB_ORGANIZATION=your-org
#
# Optional: Enterprise name (for context/debugging)
# JAATO_GITHUB_ENTERPRISE=your-enterprise
#
# Optional: Override API endpoint (default: https://models.github.ai/inference)
# JAATO_GITHUB_ENDPOINT=https://models.github.ai/inference

# =============================================================================
# Anthropic Authentication (for JAATO_PROVIDER=anthropic)
# =============================================================================
# Direct access to Claude models via the Anthropic API.
# Supports Claude 3.5, Claude 4, and Claude Opus 4.5 model families.
#
# --- Option A: API Key (recommended) ---
# Uses API credits from console.anthropic.com (pay-as-you-go).
# Get your API key at: https://console.anthropic.com/settings/keys
#
# ANTHROPIC_API_KEY=sk-ant-api03-your-api-key-here
#
# --- Option B: OAuth Token (may have restrictions) ---
# Attempts to use your Claude Pro/Max subscription instead of API credits.
#
# ⚠️  WARNING: OAuth tokens are currently restricted by Anthropic to only work
#     with official Claude Code clients. Third-party tools like jaato may receive:
#     "This credential is only authorized for use with Claude Code"
#
# If you want to try anyway:
#   1. Install Claude Code CLI: npm install -g @anthropics/claude-code
#   2. Generate token: claude setup-token
#   3. Set the token (valid for ~1 year):
#
# ANTHROPIC_AUTH_TOKEN=sk-ant-oat01-your-oauth-token-here
#
# Alternative env var (compatible with Claude Code CLI):
# CLAUDE_CODE_OAUTH_TOKEN=sk-ant-oat01-your-oauth-token-here

# --- Optional: Extended Thinking ---
# Enable Claude's extended thinking mode for complex reasoning tasks.
# When enabled, Claude will show its reasoning process before the final answer.
# Only supported on Claude 4+ models (claude-sonnet-4-*, claude-opus-4-5-*).
#
# JAATO_ANTHROPIC_ENABLE_THINKING=false
# JAATO_ANTHROPIC_THINKING_BUDGET=10000   # Max thinking tokens (default: 10000)

# --- Optional: Prompt Caching ---
# Enable prompt caching for up to 90% cost reduction on repeated prompts.
# Caches system instructions and tool definitions across requests.
# Useful for long conversations or applications with stable system prompts.
#
# JAATO_ANTHROPIC_ENABLE_CACHING=false

# =============================================================================
# Claude CLI Configuration (for JAATO_PROVIDER=claude_cli)
# =============================================================================
# Uses the Claude Code CLI as a backend instead of the Anthropic API.
# This allows using your Claude Pro/Max subscription without API credits.
#
# --- Requirements ---
# 1. Install Claude Code CLI: npm install -g @anthropic-ai/claude-code
# 2. Authenticate the CLI: claude login
#
# The CLI handles its own authentication separately from the anthropic provider.
# Tokens are stored in ~/.claude/ by the CLI itself.

# --- Operating Mode ---
# Controls how tool execution is handled:
#   delegated   - CLI handles tools (Read, Write, Bash, etc.) - simpler
#   passthrough - jaato handles tools via PluginRegistry - more control
#
# JAATO_CLAUDE_CLI_MODE=delegated

# --- Optional: CLI Path ---
# Path to claude CLI executable. If not set, searches PATH.
# JAATO_CLAUDE_CLI_PATH=/usr/local/bin/claude

# --- Optional: Max Turns ---
# Limit the number of agentic turns (tool execution cycles).
# Useful for controlling runaway tool loops.
# JAATO_CLAUDE_CLI_MAX_TURNS=10

# --- Optional: Permission Mode ---
# CLI permission mode for tool execution:
#   default          - Standard permission prompts
#   acceptEdits      - Auto-accept file edits
#   plan             - Planning mode (no execution)
#   bypassPermissions - Bypass all permission checks
# JAATO_CLAUDE_CLI_PERMISSION_MODE=default

# =============================================================================
# Antigravity Authentication (for JAATO_PROVIDER=antigravity)
# =============================================================================
# Access Gemini 3 and Claude models through Google's Antigravity IDE backend.
# Uses Google OAuth authentication (no API key needed).
#
# --- Authentication ---
# Antigravity uses Google OAuth with PKCE. Run this command to authenticate:
#   antigravity-auth login
#
# This opens your browser for Google sign-in. After authenticating, tokens are
# stored in ~/.config/jaato/antigravity_accounts.json
#
# You can add multiple Google accounts for automatic load balancing:
#   antigravity-auth login   (run multiple times for each account)
#   antigravity-auth accounts (list all accounts)
#   antigravity-auth status   (show current status)
#
# --- Available Models ---
# Antigravity quota (via Google IDE backend):
#   antigravity-gemini-3-pro         (1M context, thinking levels: low, high)
#   antigravity-gemini-3-flash       (1M context, thinking levels: minimal, low, medium, high)
#   antigravity-claude-sonnet-4-5    (200K context)
#   antigravity-claude-sonnet-4-5-thinking (extended thinking)
#   antigravity-claude-opus-4-5-thinking   (extended thinking)
#
# Gemini CLI quota:
#   gemini-2.5-flash, gemini-2.5-pro
#   gemini-3-flash-preview, gemini-3-pro-preview

# --- Optional: Override Settings ---
# Override project ID (usually auto-detected from OAuth)
# JAATO_ANTIGRAVITY_PROJECT_ID=your-project-id

# Override API endpoint
# JAATO_ANTIGRAVITY_ENDPOINT=https://daily-cloudcode-pa.sandbox.googleapis.com

# Preferred quota pool: antigravity (default) or gemini-cli
# JAATO_ANTIGRAVITY_QUOTA=antigravity

# --- Optional: Thinking Configuration ---
# Gemini 3 thinking level: minimal, low, medium, high
# JAATO_ANTIGRAVITY_THINKING_LEVEL=low

# Claude thinking budget in tokens (default: 8192, max: 32768)
# JAATO_ANTIGRAVITY_THINKING_BUDGET=8192

# --- Optional: Multi-Account Settings ---
# Enable automatic account rotation on rate limit (default: true)
# JAATO_ANTIGRAVITY_AUTO_ROTATE=true

# =============================================================================
# Legacy Variables (still supported for backwards compatibility)
# =============================================================================
# PROJECT_ID=your-gcp-project-id
# LOCATION=us-central1

# =============================================================================
# Optional: MCP Server Credentials
# =============================================================================
# Note: GITHUB_TOKEN is also used by the MCP GitHub server.

# Confluence credentials for MCP Atlassian server
# CONFLUENCE_URL=https://your-domain.atlassian.net
# CONFLUENCE_USERNAME=your-email@example.com
# CONFLUENCE_API_TOKEN=your-confluence-api-token

# =============================================================================
# Optional: Rate Limiting and Retry Settings
# =============================================================================
# Proactive rate limiting (prevents 429 errors)
# AI_REQUEST_INTERVAL=0.5       # Minimum seconds between API requests (0 = disabled)

# Reactive retry (handles 429 errors when they occur)
# AI_RETRY_ATTEMPTS=5           # Max retry attempts for transient errors
# AI_RETRY_BASE_DELAY=1.0       # Initial retry delay in seconds
# AI_RETRY_MAX_DELAY=30.0       # Maximum retry delay in seconds
# AI_RETRY_LOG_SILENT=false     # Set to 'true' to suppress retry logging

# =============================================================================
# Optional: Garbage Collection Settings
# =============================================================================
# GC trigger threshold as percentage of context window (default: 80.0)
# Lower values trigger GC earlier, useful for testing
# JAATO_GC_THRESHOLD=80.0

# =============================================================================
# Optional: Debug Settings
# =============================================================================
# AI_USE_CHAT_FUNCTIONS=1
# VERBOSE=1

# =============================================================================
# Optional: Plugin Configuration Paths
# =============================================================================
# Override default config file locations for plugins.
# Default locations are typically .jaato/<plugin>.json or <plugin>.json in cwd.
#
# FILESYSTEM_QUERY_CONFIG_PATH=.jaato/filesystem_query.json
# PERMISSION_CONFIG_PATH=.jaato/permissions.json
# REFERENCES_CONFIG_PATH=.jaato/references.json
# TODO_CONFIG_PATH=.jaato/todo.json
# Trace log file for subagent debug output (useful with rich terminal UIs)
# Default: /tmp/rich_client_trace.log
# Set to empty string to disable
# JAATO_TRACE_LOG=/tmp/rich_client_trace.log

# Provider-level streaming trace (logs each chunk received from model)
# Useful for debugging streaming, cancellation, and token accounting issues.
# Default: /tmp/provider_trace.log
# Set to empty string to disable
# JAATO_PROVIDER_TRACE=/tmp/provider_trace.log

# =============================================================================
# Optional: Clipboard Settings
# =============================================================================
# Clipboard mechanism for Ctrl+Y yank (copy) feature.
# Options: osc52 (default - works over SSH, no external dependencies)
# JAATO_COPY_MECHANISM=osc52

# Sources to include when copying (chrome-free extraction).
# Use & to separate multiple sources. Options: model, user, tool
# Default: model (only model responses)
# Examples:
#   model         - Just model responses
#   model&user    - Model responses and user prompts
#   model&user&tool - Everything except system chrome
# JAATO_COPY_SOURCES=model

# =============================================================================
# Optional: Telemetry (OpenTelemetry)
# =============================================================================
# Enable OpenTelemetry tracing for observability. Exports spans to any
# OTel-compatible backend (Langfuse, Arize Phoenix, Helicone, etc.).
#
# Requires: pip install -r requirements-telemetry.txt

# Enable telemetry (default: false)
# JAATO_TELEMETRY_ENABLED=false

# Exporter type: otlp, console, file, none (default: otlp)
# JAATO_TELEMETRY_EXPORTER=otlp

# File path for file exporter (default: /tmp/jaato-traces.jsonl)
# JAATO_TELEMETRY_FILE=/tmp/jaato-traces.jsonl

# Redact prompts/responses in traces (default: true)
# JAATO_TELEMETRY_REDACT_CONTENT=true

# Standard OpenTelemetry environment variables (for otlp exporter):
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_EXPORTER_OTLP_HEADERS=Authorization=Bearer xxx
# OTEL_SERVICE_NAME=jaato
